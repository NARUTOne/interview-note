# P48

> å‰åº + ä¸­åº = äºŒå‰æ ‘

**âš¡é¢˜ç›®**ï¼š

â“ æ ¹æ®ä¸€æ£µæ ‘çš„å‰åºéå†ä¸ä¸­åºéå†æ„é€ äºŒå‰æ ‘ã€‚

ä½ å¯ä»¥å‡è®¾æ ‘ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç´ ã€‚
ä¾‹å¦‚ï¼Œç»™å‡º
å‰åºéå† preorder = [3,9,20,15,7]
ä¸­åºéå† inorder = [9,3,15,20,7]
è¿”å›å¦‚ä¸‹çš„äºŒå‰æ ‘ï¼š

    3
   / \
  9  20
    /  \
   15   7

## æ€è€ƒ âŒš

- å‰åºéå†ï¼š æ ¹ - å·¦ - å³
- ä¸­åºéå†ï¼š å·¦ - æ ¹ - å³

åœ¨ä¸­åºåºåˆ—ä¸­å®šä½åˆ°æ ¹ç»“ç‚¹(p1)å¯¹åº”çš„åæ ‡ï¼Œç„¶ååŸºäºè¿™ä¸ªåæ ‡åˆ’åˆ†å‡ºå·¦å³å­æ ‘å¯¹åº”çš„ä¸¤ä¸ªå­åºåˆ—ï¼Œ
è¿›è€Œæ˜ç¡®åˆ°å·¦å³å­æ ‘å„è‡ªåœ¨å‰åºã€ä¸­åºéå†åºåˆ—ä¸­å¯¹åº”çš„ç´¢å¼•åŒºé—´ï¼Œç”±æ­¤æ„é€ å·¦å³å­æ ‘ã€‚

## å°è¯• âŒ›

```js
/**
 * é¢„å®šä¹‰æ ‘çš„ç»“ç‚¹ç»“æ„.
 * function TreeNode(val) {
 *     this.val = val;
 *     this.left = this.right = null;
 * }
 */
/**
 * @param {number[]} preorder
 * @param {number[]} inorder
 * @return {TreeNode}
 */
function buildTree (preorder, inorder) {
  if (!preorder.length || !inorder.length) return null;

  // æ ¹æ®å‰åºä¸ºä¸»ï¼Œä¸­åºåˆ’åˆ†å·¦å³å­æ ‘
  function helper (start, end) {
    // start > end å­æ ‘ä¸ºç©º
    if (start > end) return null;

    const node = preorder.shift(); // å‰åºé€æ­¥é€’å½’è¿›è¡Œåˆ†é…
    const index = inorder.indexOf(node); // è·å–ç´¢å¼•

    // ç´¢å¼•ä¸å­˜åœ¨
    if (index < 0) return node;

    node.left = helper(start, index - 1);
    node.right = helper(index + 1, end);

    return node;
  }

  return helper(0, preorder.length - 1);
}
```

## ä¼˜è§£ ğŸš€

```js
/**
 * é¢„å®šä¹‰æ ‘çš„ç»“ç‚¹ç»“æ„.
 * function TreeNode(val) {
 *     this.val = val;
 *     this.left = this.right = null;
 * }
 */
/**
 * @param {number[]} preorder
 * @param {number[]} inorder
 * @return {TreeNode}
 */
const buildTree = function(preorder, inorder) {
  // ç¼“å­˜ç»“ç‚¹æ€»ä¸ªæ•°ï¼ˆéå†åºåˆ—çš„é•¿åº¦ï¼‰
  const len = preorder.length
  // å®šä¹‰æ„é€ äºŒå‰æ ‘ç»“ç‚¹çš„é€’å½’å‡½æ•°
  // æŠŠå‰åºåºåˆ—å½“å‰èŒƒå›´çš„å¤´éƒ¨ç´¢å¼•è®°ä¸º preLï¼Œå°¾éƒ¨ç´¢å¼•è®°ä¸º preRï¼›æŠŠä¸­åºåºåˆ—å½“å‰èŒƒå›´çš„å¤´éƒ¨ç´¢å¼•è®°ä¸º inLï¼Œå°¾éƒ¨ç´¢å¼•è®°ä¸º inRã€‚
  function build(preL, preR, inL, inR) {
    // å¤„ç†è¶Šç•Œæƒ…å†µ
    if(preL > preR) {
        return null
    }
    // åˆå§‹åŒ–ç›®æ ‡ç»“ç‚¹, é»˜è®¤null
    const root = new TreeNode()  
    // ç›®æ ‡ç»“ç‚¹æ˜ å°„çš„æ˜¯å½“å‰å‰åºéå†åºåˆ—çš„å¤´éƒ¨ç»“ç‚¹ï¼ˆä¹Ÿå°±æ˜¯å½“å‰èŒƒå›´çš„æ ¹ç»“ç‚¹ï¼‰
    root.val = preorder[preL]  
    // å®šä½åˆ°æ ¹ç»“ç‚¹åœ¨ä¸­åºéå†åºåˆ—ä¸­çš„ä½ç½®
    const k = inorder.indexOf(root.val)  
    // è®¡ç®—å‡ºå·¦å­æ ‘ä¸­ç»“ç‚¹çš„ä¸ªæ•°
    const numLeft = k - inL  
    // æ„é€ å·¦å­æ ‘
    root.left = build(preL+1, preL+numLeft, inL, k-1)
    // æ„é€ å³å­æ ‘
    root.right = build(preL+numLeft+1, preR, k+1, inR)  
    // è¿”å›å½“å‰ç»“ç‚¹
    return root
  }
  // é€’å½’æ„é€ äºŒå‰æ ‘
  return build(0, len-1, 0, len-1)
}
```
