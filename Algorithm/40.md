# P40

> æ»‘åŠ¨çª—å£é—®é¢˜

**âš¡é¢˜ç›®**:

â“ é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œæ»‘åŠ¨çª—å£çš„å¤§å° kï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼

ç¤ºä¾‹: è¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3 è¾“å‡º: [3,3,5,5,6,7]

è§£é‡Š: æ»‘åŠ¨çª—å£çš„ä½ç½®

---------------
[1 3 -1] -3 5 3 6 7
1 [3 -1 -3] 5 3 6 7
1 3 [-1 -3 5] 3 6 7
1 3 -1 [-3 5 3] 6 7
1 3 -1 -3 [5 3 6] 7
1 3 -1 -3 5 [3 6 7]

## ä¼˜è§£ ğŸ”¥

- çº¦æŸèŒƒå›´ï¼Œå¯ä»¥ç”¨åŒæŒ‡é’ˆ

### åŒæŒ‡é’ˆ+éå†æ³•

> æ—¶é—´å¤æ‚åº¦ï¼šO(kn)

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number[]}
 */
const maxSlidingWindow = function (nums, k) {
  // ç¼“å­˜æ•°ç»„çš„é•¿åº¦
  const len = nums.length;
  // å®šä¹‰ç»“æœæ•°ç»„
  const res = [];
  // åˆå§‹åŒ–å·¦æŒ‡é’ˆ
  let left = 0;
  // åˆå§‹åŒ–å³æŒ‡é’ˆ
  let right = k - 1;
  // å½“æ•°ç»„æ²¡æœ‰è¢«éå†å®Œæ—¶ï¼Œæ‰§è¡Œå¾ªç¯ä½“å†…çš„é€»è¾‘
  while (right < len) {
    // è®¡ç®—å½“å‰çª—å£å†…çš„æœ€å¤§å€¼
    const max = calMax(nums, left, right);
    // å°†æœ€å¤§å€¼æ¨å…¥ç»“æœæ•°ç»„
    res.push(max);
    // å·¦æŒ‡é’ˆå‰è¿›ä¸€æ­¥
    left++;
    // å³æŒ‡é’ˆå‰è¿›ä¸€æ­¥
    right++;
  }
  // è¿”å›ç»“æœæ•°ç»„
  return res;
};

// è¿™ä¸ªå‡½æ•°ç”¨æ¥è®¡ç®—æœ€å¤§å€¼
function calMax(arr, left, right) {
  // å¤„ç†æ•°ç»„ä¸ºç©ºçš„è¾¹ç•Œæƒ…å†µ
  if (!arr || !arr.length) {
    return;
  }
  // åˆå§‹åŒ– maxNum çš„å€¼ä¸ºçª—å£å†…ç¬¬ä¸€ä¸ªå…ƒç´ 
  let maxNum = arr[left];
  // éå†çª—å£å†…æ‰€æœ‰å…ƒç´ ï¼Œæ›´æ–° maxNum çš„å€¼
  for (let i = left; i <= right; i++) {
    if (arr[i] > maxNum) {
      maxNum = arr[i];
    }
  }
  // è¿”å›æœ€å¤§å€¼
  return maxNum;
}
```

### åŒç«¯é˜Ÿåˆ—æ³•

> æ—¶é—´å¤æ‚åº¦ï¼šO(n)

- åœ¨çª—å£å‘ç”Ÿç§»åŠ¨æ—¶ï¼Œåªæ ¹æ®å‘ç”Ÿå˜åŒ–çš„å…ƒç´ å¯¹æœ€å¤§å€¼è¿›è¡Œæ›´æ–°
- ç»´æŠ¤ä¸€ä¸ªæœ‰æ•ˆçš„é€’å‡é˜Ÿåˆ—
- ç»´æŒé€’å‡é˜Ÿåˆ—çš„ç›®çš„ï¼Œå°±åœ¨äºç¡®ä¿é˜Ÿå¤´å…ƒç´ å§‹ç»ˆæ˜¯å½“å‰çª—å£çš„æœ€å¤§å€¼

```js
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number[]}
 */
const maxSlidingWindow = function (nums, k) {
  // ç¼“å­˜æ•°ç»„çš„é•¿åº¦
  const len = nums.length;
  // åˆå§‹åŒ–ç»“æœæ•°ç»„
  const res = [];
  // åˆå§‹åŒ–åŒç«¯é˜Ÿåˆ—
  const deque = [];
  // å¼€å§‹éå†æ•°ç»„
  for (let i = 0; i < len; i++) {
    // å½“é˜Ÿå°¾å…ƒç´ å°äºå½“å‰å…ƒç´ æ—¶
    while (deque.length && nums[deque[deque.length - 1]] < nums[i]) {
      // å°†é˜Ÿå°¾å…ƒç´ ï¼ˆç´¢å¼•ï¼‰ä¸æ–­å‡ºé˜Ÿï¼Œç›´è‡³é˜Ÿå°¾å…ƒç´ å¤§äºç­‰äºå½“å‰å…ƒç´ 
      deque.pop();
    }
    // å…¥é˜Ÿå½“å‰å…ƒç´ ç´¢å¼•ï¼ˆæ³¨æ„æ˜¯ç´¢å¼•ï¼‰
    deque.push(i);
    // å½“é˜Ÿå¤´å…ƒç´ çš„ç´¢å¼•å·²ç»è¢«æ’é™¤åœ¨æ»‘åŠ¨çª—å£ä¹‹å¤–æ—¶
    while (deque.length && deque[0] <= i - k) {
      // å°†é˜Ÿå¤´å…ƒç´ ç´¢å¼•å‡ºé˜Ÿ
      deque.shift();
    }
    // åˆ¤æ–­æ»‘åŠ¨çª—å£çš„çŠ¶æ€ï¼Œåªæœ‰åœ¨è¢«éå†çš„å…ƒç´ ä¸ªæ•°å¤§äº k çš„æ—¶å€™ï¼Œæ‰æ›´æ–°ç»“æœæ•°ç»„
    if (i >= k - 1) {
      res.push(nums[deque[0]]);
    }
  }
  // è¿”å›ç»“æœæ•°ç»„
  return res;
};
```
