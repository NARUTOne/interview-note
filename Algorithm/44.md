# P44

> å †ç»“æ„åœ¨æ’åºä¸­çš„åº”ç”¨â€”â€”ä¼˜å…ˆé˜Ÿåˆ—

**âš¡é¢˜ç›®**:

â“ åœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ç¤ºä¾‹ 1:
è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2
è¾“å‡º: 5

## ä¼˜è§£ ğŸ”¥

1) ç›´æ¥APIæ’åºå–å€¼

```js
/**
* @param {number[]} nums
* @param {number} k
* @return {number}
*/
const findKthLargest = function(nums, k) {
 // å°†æ•°ç»„é€†åº
 const sorted = nums.sort((a,b)=> {
     return b-a
 })
 // å–ç¬¬kå¤§çš„å…ƒç´ 
 return sorted[k-1]
};
```

2) å°é¡¶å †å–å€¼ï¼šè¦æƒ³æ±‚å‡ºç¬¬ k å¤§çš„å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º k çš„å°é¡¶å †

è¿™ä¸ªå †çš„åˆå§‹åŒ–è¿‡ç¨‹å¯ä»¥é€šè¿‡éå†å¹¶æ’å…¥æ•°ç»„çš„å‰ k ä¸ªå…ƒç´ æ¥å®ç°ã€‚å½“å †è¢«å¡«æ»¡åï¼Œå†å°è¯•ç”¨æ•°ç»„çš„ç¬¬ k+1 åˆ°æœ«å°¾çš„è¿™éƒ¨åˆ†å…ƒç´ æ¥æ›´æ–°è¿™ä¸ªå°é¡¶å †

**åªå…è®¸æ¯”å †é¡¶å…ƒç´ å¤§çš„å€¼è¿›å…¥å †**:

è‹¥éå†åˆ°çš„æ•°å­—æ¯”å°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼å¤§ï¼Œåˆ™ç”¨è¯¥æ•°å­—æ›¿æ¢æ‰å°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼
è‹¥éå†åˆ°çš„æ•°å­—æ¯”å°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼å°ï¼Œåˆ™å¿½ç•¥è¿™ä¸ªæ•°å­—

```js
/**
* @param {number[]} nums
* @param {number} k
* @return {number}
*/
const findKthLargest = function(nums, k) {
   // åˆå§‹åŒ–ä¸€ä¸ªå †æ•°ç»„
   const heap = []  
   // nè¡¨ç¤ºå †æ•°ç»„é‡Œå½“å‰æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•
   let n = 0
   // ç¼“å­˜ nums çš„é•¿åº¦
   const len = nums.length  
   // åˆå§‹åŒ–å¤§å°ä¸º k çš„å †
   function createHeap() {
       for(let i=0;i<k;i++) {
           // é€ä¸ªå¾€å †é‡Œæ’å…¥æ•°ç»„ä¸­çš„æ•°å­—
           insert(nums[i])
       }
   }

   // å°è¯•ç”¨ [k, n-1] åŒºé—´çš„å…ƒç´ æ›´æ–°å †
   function updateHeap() {
       for(let i=k;i<len;i++) {
           // åªæœ‰æ¯”å †é¡¶å…ƒç´ å¤§çš„æ‰æœ‰èµ„æ ¼è¿›å †
           if(nums[i]>heap[0]) {
               // ç”¨è¾ƒå¤§æ•°å­—æ›¿æ¢å †é¡¶æ•°å­—
               heap[0] = nums[i]  
               // é‡å¤å‘ä¸‹å¯¹æ¯”+äº¤æ¢çš„é€»è¾‘
               downHeap(0, k)
           }
       }
   }

   // å‘ä¸‹å¯¹æ¯”å‡½æ•° äº¤æ¢å…ƒç´ ï¼Œç»´æŒæœ€å°å †
   function downHeap(low, high) {
       // å…¥å‚æ˜¯å †å…ƒç´ åœ¨æ•°ç»„é‡Œçš„ç´¢å¼•èŒƒå›´ï¼Œlowè¡¨ç¤ºä¸‹ç•Œï¼Œhighè¡¨ç¤ºä¸Šç•Œ
       let i=low,j=i*2+1
       // å½“ j ä¸è¶…è¿‡ä¸Šç•Œæ—¶ï¼Œé‡å¤å‘ä¸‹å¯¹æ¯”+äº¤æ¢çš„æ“ä½œ
       while(j<=high) {
           // // å¦‚æœå³å­©å­æ¯”å·¦å­©å­æ›´å°ï¼Œåˆ™ç”¨å³å­©å­å’Œæ ¹ç»“ç‚¹æ¯”è¾ƒ
           if(j+1<=high && heap[j+1]<heap[j]) {
               j = j+1
           }

           // è‹¥å½“å‰ç»“ç‚¹æ¯”å­©å­ç»“ç‚¹å¤§ï¼Œåˆ™äº¤æ¢ä¸¤è€…çš„ä½ç½®ï¼ŒæŠŠè¾ƒå°çš„ç»“ç‚¹â€œæ‹±ä¸Šå»â€
           if(heap[i] > heap[j]) {
               // äº¤æ¢ä½ç½®
               const temp = heap[j]  
               heap[j] = heap[i]  
               heap[i] = temp

               // i æ›´æ–°ä¸ºè¢«äº¤æ¢çš„å­©å­ç»“ç‚¹çš„ç´¢å¼•
               i=j  
               // j æ›´æ–°ä¸ºå­©å­ç»“ç‚¹çš„å·¦å­©å­çš„ç´¢å¼•
               j=j*2+1
           } else {
               break
           }
       }
   }

   // å…¥å‚æ˜¯å †å…ƒç´ åœ¨æ•°ç»„é‡Œçš„ç´¢å¼•èŒƒå›´ï¼Œlowè¡¨ç¤ºä¸‹ç•Œï¼Œhighè¡¨ç¤ºä¸Šç•Œ
   function upHeap(low, high) {
       // åˆå§‹åŒ– iï¼ˆå½“å‰ç»“ç‚¹ç´¢å¼•ï¼‰ä¸ºä¸Šç•Œ
       let i = high  
       // åˆå§‹åŒ– j ä¸º i çš„çˆ¶ç»“ç‚¹
       let j = Math.floor((i-1)/2)  
       // å½“ j ä¸é€¾è¶Šä¸‹ç•Œæ—¶ï¼Œé‡å¤å‘ä¸Šå¯¹æ¯”+äº¤æ¢çš„è¿‡ç¨‹
       while(j>=low)  {
           // è‹¥å½“å‰ç»“ç‚¹æ¯”çˆ¶ç»“ç‚¹å°
           if(heap[j]>heap[i]) {
               // äº¤æ¢å½“å‰ç»“ç‚¹ä¸çˆ¶ç»“ç‚¹ï¼Œä¿æŒçˆ¶ç»“ç‚¹æ˜¯è¾ƒå°çš„ä¸€ä¸ª
               const temp = heap[j]
               heap[j] = heap[i]  
               heap[i] = temp

               // iæ›´æ–°ä¸ºè¢«äº¤æ¢çˆ¶ç»“ç‚¹çš„ä½ç½®
               i=j
               // jæ›´æ–°ä¸ºçˆ¶ç»“ç‚¹çš„çˆ¶ç»“ç‚¹
               j=Math.floor((i-1)/2)  
           } else {
               break
           }
       }
   }

   // æ’å…¥æ“ä½œ=å°†å…ƒç´ æ·»åŠ åˆ°å †å°¾éƒ¨+å‘ä¸Šè°ƒæ•´å…ƒç´ çš„ä½ç½® ç”Ÿæˆæœ€å°å †
   function insert(x) {
       heap[n] = x  
       upHeap(0, n)
       n++
   }

   // è°ƒç”¨createHeapåˆå§‹åŒ–å…ƒç´ ä¸ªæ•°ä¸ºkçš„é˜Ÿ
   createHeap()
   // è°ƒç”¨updateHeapæ›´æ–°å †çš„å†…å®¹ï¼Œç¡®ä¿æœ€åå †é‡Œä¿ç•™çš„æ˜¯æœ€å¤§çš„kä¸ªå…ƒç´ 
   updateHeap()
   // æœ€åå †é¡¶ç•™ä¸‹çš„å°±æ˜¯æœ€å¤§çš„kä¸ªå…ƒç´ ä¸­æœ€å°çš„é‚£ä¸ªï¼Œä¹Ÿå°±æ˜¯ç¬¬kå¤§çš„å…ƒç´ 
   return heap[0]
};
```
