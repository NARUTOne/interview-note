# P20

> ç®—æ³•é¢˜ æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°

**âš¡é¢˜ç›®**:

â“ ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æœ‰åºæ•°ç»„ nums1 å’Œ nums2ã€‚è¯·æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ã€‚è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log(m+n))

ç¤ºä¾‹ 1ï¼š

nums1 = [1, 3]
nums2 = [2]
ä¸­ä½æ•°æ˜¯ 2.0

ç¤ºä¾‹ 2ï¼š

nums1 = [1, 2]
nums2 = [3, 4]
ä¸­ä½æ•°æ˜¯(2 + 3) / 2 = 2.5

## ä¼˜è§£ ğŸ”¥

> ç”±äºæœ‰åºï¼Œé¦–å…ˆconcatæ•°ç»„ï¼Œç„¶ååˆ¤æ–­æ•°ç»„é•¿åº¦æ˜¯å¥‡æ•°å¶æ•°ï¼Œå¥‡æ•°ç›´æ¥æ‰¾ç¬¬n/2ä½ï¼Œå¶æ•°æ‰¾(n/2-1 + n/2)/2

```js
function getMidNum (arr1, arr2) {
  const arr = [].concat(arr1, arr2).sort((a, b) => a-b);
  const len = arr.length;

  let k = [0];
  if (len % 2) {
    k = [Math.floor(len / 2)]
  } else {
    k = [len/2 - 1, len/2];
  }

  const addNum = k.reduce((a, b) => a + arr[b], 0);
  return k.length == 1 ? addNum : addNum / 2;
}
```

> éœ€è¦æ»¡è¶³ æ—¶é—´å¤æ‚åº¦ O(log(m+n))

```js
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function(nums1, nums2) {
  let m = nums1.length
  let n = nums2.length

  // å¥‡æ•°ï¼Œå¶æ•°
  let k1 = Math.floor((m + n + 1) / 2)
  let k2 = Math.floor((m + n + 2) / 2)

  return (findMedianSortedArraysCore(nums1, 0, nums2, 0, k1) + findMedianSortedArraysCore(nums1, 0, nums2, 0, k2)) / 2
};

/**
 * ä¸¤æ•°ç»„æ¯”è¾ƒç¡®å®š
 * @param {number[]} nums1 â€”â€”>
 * @param {number[]} nums2 <â€”â€”
 * @param {number} i
 * @param {number} j
 * @param {number} kï¼Œæ­¥è¿›
 * @return {number}
 */
const findMedianSortedArraysCore = (nums1, i, nums2, j, k)  => {
  // å¦‚æœæ•°ç»„èµ·å§‹ä½ç½®å·²ç»å¤§äºæ•°ç»„é•¿åº¦-1
  // è¯´æ˜å·²ç»æ˜¯ä¸ªç©ºæ•°ç»„
  // ç›´æ¥ä»å¦å¤–ä¸€ä¸ªæ•°ç»„é‡Œå–ç¬¬kä¸ªæ•°å³å¯
  if (i > nums1.length - 1) {
    return nums2[j + k - 1]
  }
  if (j > nums2.length - 1) {
    return nums1[i + k - 1]
  }
  // å¦‚æœkä¸º1, å½“å‰å¾ªç¯æ¯”è¾ƒç»“æŸï¼ŒæŸé¡¹æ•°ç»„è¾¾åˆ°æœ€åä¸€é¡¹æˆ–ç¬¬ä¸€é¡¹
  // å°±æ˜¯å–ä¸¤ä¸ªæ•°ç»„çš„èµ·å§‹å€¼é‡Œçš„æœ€å°å€¼
  if (k === 1) {
    return Math.min(nums1[i], nums2[j])
  }
  // å–k2ä¸º(k/2)æˆ–è€…æ•°ç»„1çš„é•¿åº¦æˆ–è€…æ•°ç»„2çš„é•¿åº¦çš„æœ€å°å€¼
  // è¿™ä¸€æ­¥å¯ä»¥é¿å…k2å¤§äºæŸä¸ªæ•°ç»„çš„é•¿åº¦ï¼ˆé•¿åº¦ä¸ºä»èµ·å§‹åæ ‡åˆ°ç»“å°¾ï¼‰
  let k2 = Math.floor(k / 2) // å¯¹åŠæ­¥è¿›
  let length1 = nums1.length - i
  let length2 = nums2.length - j
  k2 = Math.min(k2, length1, length2)

  let value1 = nums1[i + k2 - 1]
  let value2 = nums2[j + k2 - 1]

  // æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„èµ·å§‹åæ ‡çš„å€¼
  // å¦‚æœvalue1å°äºvalue2
  // å°±èˆå¼ƒnums1å‰i + k2éƒ¨åˆ†
  // å¦åˆ™èˆå¼ƒnums2å‰j + k2éƒ¨åˆ†
  if (value1 < value2) {
    return findMedianSortedArraysCore(nums1, i + k2, nums2, j, k - k2)
  } else {
    return findMedianSortedArraysCore(nums1, i, nums2, j + k2, k - k2)
  }
}
```
