# P49

> å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨

**âš¡é¢˜ç›®**ï¼š

â“ ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚è¦æ±‚è¿”å›è¿™ä¸ªé“¾è¡¨çš„ æ·±æ‹·è´

æˆ‘ä»¬ç”¨ä¸€ä¸ªç”± n ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥/è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ª [val, random_index] è¡¨ç¤ºï¼š
valï¼šä¸€ä¸ªè¡¨ç¤º Node.val çš„æ•´æ•°ã€‚
random_indexï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä» 0 åˆ° n-1ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º  null ã€‚

è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]

## æ€è€ƒ âŒš

- æ·±æ‹·è´ï¼Œé‡æ–°new Node()
- éšæœºæŒ‡é’ˆ + nextæŒ‡é’ˆ è¿›è¡Œ mapå­˜å‚¨å…³è”

åœ¨ä¸­åºåºåˆ—ä¸­å®šä½åˆ°æ ¹ç»“ç‚¹(p1)å¯¹åº”çš„åæ ‡ï¼Œç„¶ååŸºäºè¿™ä¸ªåæ ‡åˆ’åˆ†å‡ºå·¦å³å­æ ‘å¯¹åº”çš„ä¸¤ä¸ªå­åºåˆ—ï¼Œ
è¿›è€Œæ˜ç¡®åˆ°å·¦å³å­æ ‘å„è‡ªåœ¨å‰åºã€ä¸­åºéå†åºåˆ—ä¸­å¯¹åº”çš„ç´¢å¼•åŒºé—´ï¼Œç”±æ­¤æ„é€ å·¦å³å­æ ‘ã€‚

## ä¼˜è§£ ğŸš€

```js
/**
 * // Definition for a Node.
 * function Node(val, next, random) {
 *    this.val = val;
 *    this.next = next;
 *    this.random = random;
 * };
 */

/**
 * @param {Node} head
 * @return {Node}
 */
const copyRandomList = (head) => {
    // å¤„ç†è¾¹ç•Œæ¡ä»¶
    if (!head) return null
    // åˆå§‹åŒ–copyçš„å¤´éƒ¨ç»“ç‚¹
    let copyHead = new Node()
    // åˆå§‹åŒ–copyçš„æ¸¸æ ‡ç»“ç‚¹
    let copyNode = copyHead
    // åˆå§‹åŒ–hashMap
    const hashMap = new Map()
    let curr = head
    // é¦–æ¬¡å¾ªç¯ï¼Œæ­£å¸¸å¤„ç†é“¾è¡¨çš„å¤åˆ¶
    while (curr) {
        copyNode.val = curr.val
        copyNode.next = curr.next ? new Node() : null // åˆå§‹åŒ–æ·±æ‹·è´æ¯ä¸ªèŠ‚ç‚¹
        hashMap.set(curr, copyNode)
        curr = curr.next
        copyNode = copyNode.next
    }
    // å°†æ¸¸æ ‡å¤ä½åˆ°head
    curr = head
    // å°†copyé“¾è¡¨çš„æ¸¸æ ‡ä¹Ÿå¤ä½åˆ°copyHead
    copyNode = copyHead
    // å†æä¸ªå¾ªç¯ï¼Œç‰¹æ®Šå¤„ç†randomå…³ç³»
    while (curr) {
        // å¤„ç†randomçš„æŒ‡å‘
        copyNode.random = curr.random ? hashMap.get(curr.random) : null
        // copyNode å’Œ curr ä¸¤ä¸ªæ¸¸æ ‡ä¸€èµ·å‰è¿›
        copyNode = copyNode.next
        curr = curr.next
    }

    // æ³¨æ„è¿™é‡Œè¿”å›çš„æ˜¯copyHeadè€Œä¸æ˜¯head
    return copyHead
};
```
