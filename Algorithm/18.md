# P18

> ç®—æ³•é¢˜  list è½¬æ¢æˆ tree

**âš¡é¢˜ç›®**:

â“ å®ç° convert æ–¹æ³•ï¼ŒæŠŠåŸå§‹ list è½¬æ¢æˆæ ‘å½¢ç»“æ„ï¼Œè¦æ±‚å°½å¯èƒ½é™ä½æ—¶é—´å¤æ‚åº¦

## ä¼˜è§£ ğŸ”¥

> idè¿›è¡Œmap + å¯¹è±¡æ˜ å°„ï¼Œæ—¶é—´å¤æ‚åº¦O(n)

```js
function arrayToTree(arr, id="id", pid="pid", children="children") {
  if (!Array.isArray(arr)) {
    return new Error('data params is array type');
  }
  const data = [].concat(arr);
  const result = [];
  const hash = {};
  data.forEach((item, index) => {
    hash[data[index][id]] = item;
  });

  data.forEach((item) => {
    const hashVP = hash[item[pid]]; // è·å–çš„å®è´¨è¿˜æ˜¯dataä¸‹çš„å¯¹è±¡
    if (hashVP) {
      !hashVP[children] && (hashVP[children] = []);
      hashVP[children].push(item);
    } else {
      result.push(item);
    }
  });
  return result;
}

```
