# P32

> å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜â€”â€”æ­£åˆ™è¡¨è¾¾å¼åˆç›¸è§

**âš¡é¢˜ç›®**:

â“  è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æž„ï¼š
void addWord(word)
bool search(word)
search(word) å¯ä»¥æœç´¢æ–‡å­—æˆ–æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²åªåŒ…å«å­—æ¯ . æˆ– a-z ã€‚
. å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚

ç¤ºä¾‹ï¼š

addWord("bad")
addWord("dad")
addWord("mad")
search("pad") -> false
search("bad") -> true
search(".ad") -> true
search("b..") -> true
è¯´æ˜Ž:
ä½ å¯ä»¥å‡è®¾æ‰€æœ‰å•è¯éƒ½æ˜¯ç”±å°å†™å­—æ¯ a-z ç»„æˆçš„ã€‚

## ä¼˜è§£ ðŸ”¥

- å­˜å‚¨æ·»åŠ 
- æ­£åˆ™åŒ¹é…

```js
/**
 * æž„é€ å‡½æ•°
 */
const WordDictionary = function () {
  // åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œæ‰¿æ‹… Map çš„è§’è‰²
  this.words = {}
};

/**
  æ·»åŠ å­—ç¬¦ä¸²çš„æ–¹æ³•
 */
WordDictionary.prototype.addWord = function (word) {
  // è‹¥è¯¥å­—ç¬¦ä¸²å¯¹åº”é•¿åº¦çš„æ•°ç»„å·²ç»å­˜åœ¨ï¼Œåˆ™åªåšæ·»åŠ 
  if (this.words[word.length]) {
    this.words[word.length].push(word)
  } else {
    // è‹¥è¯¥å­—ç¬¦ä¸²å¯¹åº”é•¿åº¦çš„æ•°ç»„è¿˜ä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»º
    this.words[word.length] = [word]
  }

};

/**
  æœç´¢æ–¹æ³•
 */
WordDictionary.prototype.search = function (word) {
  // è‹¥è¯¥å­—ç¬¦ä¸²é•¿åº¦åœ¨ Map ä¸­å¯¹åº”çš„æ•°ç»„æ ¹æœ¬ä¸å­˜åœ¨ï¼Œåˆ™å¯åˆ¤æ–­è¯¥å­—ç¬¦ä¸²ä¸å­˜åœ¨
  if (!this.words[word.length]) {
    return false
  }
  // ç¼“å­˜ç›®æ ‡å­—ç¬¦ä¸²çš„é•¿åº¦
  const len = word.length
  // å¦‚æžœå­—ç¬¦ä¸²ä¸­ä¸åŒ…å«â€˜.â€™ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯æ™®é€šå­—ç¬¦ä¸²
  if (!word.includes('.')) {
    // å®šä½åˆ°å’Œç›®æ ‡å­—ç¬¦ä¸²é•¿åº¦ä¸€è‡´çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œåœ¨å…¶ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¯¥å­—ç¬¦ä¸²
    return this.words[len].includes(word)

  }

  // å¦åˆ™æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¦å…ˆåˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡
  const reg = new RegExp(word)

  // åªè¦æ•°ç»„ä¸­æœ‰ä¸€ä¸ªåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ï¼Œå°±è¿”å›žtrue
  return this.words[len].some((item) => {
    return reg.test(item)
  })
};
```

## å˜åŸºâ€”â€” æ•°å­—èŽ·å–

> å‡å¦‚è¯¥å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªéžç©ºæ ¼å­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ•´æ•°å­—ç¬¦ã€å­—ç¬¦ä¸²ä¸ºç©ºæˆ–å­—ç¬¦ä¸²ä»…åŒ…å«ç©ºç™½å­—ç¬¦æ—¶ï¼Œåˆ™ä½ çš„å‡½æ•°ä¸éœ€è¦è¿›è¡Œè½¬æ¢ã€‚
åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè‹¥å‡½æ•°ä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢æ—¶ï¼Œè¯·è¿”å›ž 0ã€‚

è¯´æ˜Žï¼š å‡è®¾æˆ‘ä»¬çš„çŽ¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œé‚£ä¹ˆå…¶æ•°å€¼èŒƒå›´ä¸º [âˆ’2^31,  2^31 âˆ’ 1]ã€‚å¦‚æžœæ•°å€¼è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œè¯·è¿”å›ž  INT_MAX (2^31 âˆ’ 1) æˆ– INT_MIN (âˆ’2^31) ã€‚

```js
// å…¥å‚æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²
const myAtoi = function(str) {
    // ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼
    const reg = /\s*([-\+]?[0-9]*).*/
    // å¾—åˆ°æ•èŽ·ç»„
    const groups = str.match(reg)
    // è®¡ç®—æœ€å¤§å€¼
    const max = Math.pow(2,31) - 1
    // è®¡ç®—æœ€å°å€¼
    const min = -max - 1
    // targetNum ç”¨äºŽå­˜å‚¨è½¬åŒ–å‡ºæ¥çš„æ•°å­—
    let targetNum = 0
    // å¦‚æžœåŒ¹é…æˆåŠŸ
    if(groups) {
        // å°è¯•è½¬åŒ–æ•èŽ·åˆ°çš„ç»“æž„
        targetNum = +groups[1]
        // æ³¨æ„ï¼Œå³ä¾¿æˆåŠŸï¼Œä¹Ÿå¯èƒ½å‡ºçŽ°éžæ•°å­—çš„æƒ…å†µï¼Œæ¯”å¦‚å•ä¸€ä¸ª'+'
        if(isNaN(targetNum)) {
            // ä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢æ—¶ï¼Œè¯·è¿”å›ž 0
            targetNum = 0
        }
    }
    // å¡å£åˆ¤æ–­
    if(targetNum > max) {
        return max
    } else if( targetNum < min) {
        return min
    }
    // è¿”å›žè½¬æ¢ç»“æžœ
    return targetNum
};
```
