# P35

> å¿«æ…¢æŒ‡é’ˆï¼Œæ¶‰åŠåå¤éå†çš„é¢˜ç›®ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´æ˜æ˜¾çš„ç‰¹å¾ï¼Œå°±æ˜¯å®ƒä»¬å¾€å¾€ä¼šæ¶‰åŠç›¸å¯¹å¤æ‚çš„é“¾è¡¨æ“ä½œï¼Œæ¯”å¦‚åè½¬ã€æŒ‡å®šä½ç½®çš„åˆ é™¤ç­‰ç­‰ã€‚

**å¿«æ…¢æŒ‡é’ˆ+å¤šæŒ‡é’ˆ**åŒç®¡é½ä¸‹ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³é“¾è¡¨ä¸­çš„å¤§éƒ¨åˆ†å¤æ‚æ“ä½œé—®é¢˜

**âš¡é¢˜ç›®**:

â“ ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚

ç¤ºä¾‹ï¼š

ç»™å®šä¸€ä¸ªé“¾è¡¨: 1->2->3->4->5, å’Œ n = 2.
å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªç»“ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1->2->3->5.
è¯´æ˜ï¼š ç»™å®šçš„ n ä¿è¯æ˜¯æœ‰æ•ˆçš„ã€‚

## ä¼˜è§£ ğŸ”¥

> ç”¨**ç©ºé—´æ¢æ—¶é—´ï¼Œæœ¬è´¨ä¸Šå…¶å®å°±æ˜¯å¯¹å…³é”®ä¿¡æ¯è¿›è¡Œæå‰è®°å¿†**ï¼Œè¿™é‡Œå’±ä»¬ç›¸å½“äºç”¨ä¸¤ä¸ªæŒ‡é’ˆå¯¹å·®å€¼å®ç°äº†è®°å¿†

- dummy ç»“ç‚¹çš„ä½¿ç”¨
- ä¸¤ä¸ªæŒ‡é’ˆ slow å’Œ fastï¼Œå…¨éƒ¨æŒ‡å‘é“¾è¡¨çš„èµ·å§‹ä½â€”â€”dummy ç»“ç‚¹
- fast å…ˆèµ°ï¼Œæ…¢æŒ‡é’ˆåèµ°ï¼Œç›¸å·®n
- å¿«æŒ‡é’ˆèµ°åˆ°é“¾è¡¨æœ«å°¾ï¼ˆç¬¬ len ä¸ªï¼‰æ—¶ï¼Œæ…¢æŒ‡é’ˆåˆšå¥½å°±åœ¨ len - n è¿™ä¸ªåœ°æ–¹ç¨³ç¨³è½åœ°ã€‚

```js
/**
 * @param {ListNode} head
 * @param {number} n
 * @return {ListNode}
 */
const removeNthFromEnd = function(head, n) {
    // åˆå§‹åŒ– dummy ç»“ç‚¹
    const dummy = new ListNode()
    // dummyæŒ‡å‘å¤´ç»“ç‚¹
    dummy.next = head
    // åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆï¼Œå‡æŒ‡å‘dummy
    let fast = dummy
    let slow = dummy

    // å¿«æŒ‡é’ˆé—·å¤´èµ° n æ­¥
    while(n!==0){
        fast = fast.next
        n--
    }

    // å¿«æ…¢æŒ‡é’ˆä¸€èµ·èµ°
    while(fast.next){
        fast = fast.next
        slow = slow.next
    }

    // æ…¢æŒ‡é’ˆåˆ é™¤è‡ªå·±çš„åç»§ç»“ç‚¹
    slow.next = slow.next.next
    // è¿”å›å¤´ç»“ç‚¹
    return dummy.next
};
```

## å¤šæŒ‡é’ˆâ€”â€”é“¾è¡¨åè½¬

**âš¡é¢˜ç›®**:

â“ å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚

ç¤ºä¾‹ï¼š

è¾“å…¥: 1->2->3->4->5->NULL
è¾“å‡º: 5->4->3->2->1->NULL

### ä¼˜è§£ ğŸ”¥ğŸ”¥

- nextæŒ‡é’ˆåè½¬
- ä¸‰ä¸ªæŒ‡é’ˆï¼Œå®ƒä»¬åˆ†åˆ«æŒ‡å‘ç›®æ ‡ç»“ç‚¹ï¼ˆcurï¼‰ã€ç›®æ ‡ç»“ç‚¹çš„å‰é©±ç»“ç‚¹ï¼ˆpreï¼‰ã€ç›®æ ‡ç»“ç‚¹çš„åç»§ç»“ç‚¹ï¼ˆnextï¼‰
- cur.next = preï¼Œå°±åšåˆ°äº† next æŒ‡é’ˆçš„åè½¬

```js
/**
 * @param {ListNode} head
 * @return {ListNode}
 */
const reverseList = function(head) {
    // åˆå§‹åŒ–å‰é©±ç»“ç‚¹ä¸º null
    let pre = null;
    // åˆå§‹åŒ–ç›®æ ‡ç»“ç‚¹ä¸ºå¤´ç»“ç‚¹
    let cur = head;
    // åªè¦ç›®æ ‡ç»“ç‚¹ä¸ä¸º nullï¼Œéå†å°±å¾—ç»§ç»­
    while (cur !== null) {
        // è®°å½•ä¸€ä¸‹ next ç»“ç‚¹
        let next = cur.next;
        // åè½¬æŒ‡é’ˆ
        cur.next = pre;
        // pre å¾€å‰èµ°ä¸€æ­¥
        pre = cur;
        // curå¾€å‰èµ°ä¸€æ­¥
        cur = next;
    }
    // åè½¬ç»“æŸåï¼Œpre å°±ä¼šå˜æˆæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹
    return pre
};
```

### å˜åŸº â€”â€” å±€éƒ¨åè½¬

> åè½¬ä»ä½ç½® m åˆ° n çš„é“¾è¡¨ã€‚è¯·ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®Œæˆåè½¬ã€‚

è¯´æ˜: 1 â‰¤ m â‰¤ n â‰¤ é“¾è¡¨é•¿åº¦ã€‚

ç¤ºä¾‹:
è¾“å…¥: 1->2->3->4->5->NULL, m = 2, n = 4
è¾“å‡º: 1->4->3->2->5->NULL

```js
/**
 * @param {ListNode} head
 * @param {number} m
 * @param {number} n
 * @return {ListNode}
 */
// å…¥å‚æ˜¯å¤´ç»“ç‚¹ã€mã€n
const reverseBetween = function(head, m, n) {
    // å®šä¹‰preã€curï¼Œç”¨leftHeadæ¥æ‰¿æ¥æ•´ä¸ªåŒºé—´çš„å‰é©±ç»“ç‚¹
    let pre,cur,leftHead
    // åˆ«å¿˜äº†ç”¨ dummy å—·
    const dummy = new ListNode()  
    // dummyåç»§ç»“ç‚¹æ˜¯å¤´ç»“ç‚¹
    dummy.next = head
    // pæ˜¯ä¸€ä¸ªæ¸¸æ ‡ï¼Œç”¨äºéå†ï¼Œæœ€åˆæŒ‡å‘ dummy
    let p = dummy  
    // på¾€å‰èµ° m-1 æ­¥ï¼Œèµ°åˆ°æ•´ä¸ªåŒºé—´çš„å‰é©±ç»“ç‚¹å¤„
    for(let i=0; i<m-1; i++){
        p = p.next
    }
    // ç¼“å­˜è¿™ä¸ªå‰é©±ç»“ç‚¹åˆ° leftHead é‡Œ
    leftHead = p
    // start æ˜¯åè½¬åŒºé—´çš„ç¬¬ä¸€ä¸ªç»“ç‚¹
    let start = leftHead.next  
    // pre æŒ‡å‘start
    pre = start
    // cur æŒ‡å‘ start çš„ä¸‹ä¸€ä¸ªç»“ç‚¹
    cur = pre.next
    // å¼€å§‹é‡å¤åè½¬åŠ¨ä½œ
    for(let i=m;i<n;i++){
        let next = cur.next
        cur.next = pre
        pre = cur
        cur = next
    }
    //  leftHead çš„åç»§ç»“ç‚¹æ­¤æ—¶ä¸ºåè½¬åçš„åŒºé—´çš„ç¬¬ä¸€ä¸ªç»“ç‚¹
    leftHead.next = pre
    // å°†åŒºé—´å†…åè½¬åçš„æœ€åä¸€ä¸ªç»“ç‚¹ next æŒ‡å‘ cur
    start.next=cur
    // dummy.next æ°¸è¿œæŒ‡å‘é“¾è¡¨å¤´ç»“ç‚¹
    return dummy.next
};
```

## Kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨

ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ k ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ç¿»è½¬åçš„é“¾è¡¨ã€‚
k æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚
å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ k çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚

ç¤ºä¾‹ï¼š ç»™ä½ è¿™ä¸ªé“¾è¡¨ï¼š1->2->3->4->5
å½“ k = 2 æ—¶ï¼Œåº”å½“è¿”å›: 2->1->4->3->5
å½“ k = 3 æ—¶ï¼Œåº”å½“è¿”å›: 3->2->1->4->5

```js
/**
 * @param {ListNode} head
 * @param {number} k
 * @return {ListNode}
 */
const reverseKGroup = function(head, k) {
  // è¿™ä¸ªæ–¹æ³•ä¸“é—¨ç”¨æ¥ç¿»è½¬æŒ‡å®šèŒƒå›´ï¼ˆä»¥headä¸ºèµ·ç‚¹ï¼‰å†…çš„kä¸ªç»“ç‚¹
  function reverse(head) {
      // åˆå§‹åŒ– preã€curã€nextä¸‰å‰‘å®¢
      let pre = null, cur = head, next = null  
      // éå†å½“å‰èŒƒå›´ç»“ç‚¹
      while(cur) {
          // ç¼“å­˜next
          next = cur.next  
          // ç¿»è½¬å½“å‰ç»“ç‚¹çš„nextæŒ‡é’ˆ
          cur.next = pre  
          // preã€curå„å‰è¿›ä¸€æ­¥ï¼Œä¸ºä¸‹ä¸€ä¸ªæŒ‡é’ˆçš„ç¿»è½¬åšå‡†å¤‡
          pre = cur  
          cur = next  
      }
      // ç¿»è½¬åˆ°æœ€åï¼Œpreä¼šæŒ‡å‘æœ€æœ«å°¾çš„ç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç¿»è½¬åçš„ç¬¬ä¸€ä¸ªç»“ç‚¹
      return pre
  }
  // æœ‰dummyæŒ‡é’ˆå¥½åŠäº‹
  let dummy = new ListNode()  
  dummy.next = head
  // preç”¨æ¥ç¼“å­˜å½“å‰è¿™ä¸€æˆªkä¸ªç»“ç‚¹çš„é“¾è¡¨å‰é©±çš„é‚£ä¸ªç»“ç‚¹ï¼ˆä¸ä¸¢å¤´ï¼‰
  let pre = dummy
  // startæŒ‡å‘kä¸ªä¸€ç»„çš„å±€éƒ¨é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ª
  let start = head
  // endæŒ‡å‘kä¸ªä¸€ç»„çš„å±€éƒ¨é“¾è¡¨ä¸­çš„æœ€åä¸€ä¸ª
  let end = head
  // nextç”¨æ¥ç¼“å­˜å½“å‰è¿™ä¸€æˆªkä¸ªç»“ç‚¹çš„é“¾è¡¨åç»§çš„é‚£ä¸ªç»“ç‚¹ï¼ˆä¸ä¸¢å°¾ï¼‰
  let next = head  
  // å½“åç»§ç»“ç‚¹å­˜åœ¨æ—¶ï¼ŒæŒç»­éå†
  while(next) {
      // æ‰¾åˆ°kä¸ªç»“ç‚¹ä¸­çš„æœ€åä¸€ä¸ª
      for(let i=1;i<k&&end;i++) {
          end = end.next
      }
      // å¦‚æœä¸æ»¡kä¸ªï¼Œç›´æ¥è¿”å›
      if(!end) {
         break
      }
      // ç¼“å­˜è¿™kä¸ªç»“ç‚¹çš„åç»§ç»“ç‚¹
      next = end.next  
      // è¿™ä¸€æ­¥æŠŠend.nextç½®ä¸ºnullï¼Œæ˜¯ä¸ºäº†é…åˆreverseæ–¹æ³•
      end.next = null  
      // æ‰‹åŠ¨æŠŠendæŒ‡å‘startï¼ˆå› ä¸ºä¸‹é¢reverseå®Œstartå°±ä¼šæ”¹å˜ï¼‰
      end = start
      // ä»¥startä¸ºèµ·ç‚¹ç¿»è½¬kä¸ªç»“ç‚¹
      start = reverse(start)
      // æ¥ä¸Šå°¾å·´
      end.next = next  
      // æ¥ä¸Šå¤´
      pre.next = start
      // preã€startã€endä¸€èµ·å‰è¿›ï¼Œä¸ºä¸‹ä¸€æ¬¡ç¿»è½¬åšå‡†å¤‡
      pre = end
      start = next  
      end = start
  }
  // dummy.nextæŒ‡å‘çš„æ°¸è¿œæ˜¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç»“ç‚¹
  return dummy.next
};
```
