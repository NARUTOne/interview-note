# P12

> JS éªŒè¯èº«ä»½è¯

**âš¡é¢˜ç›®**:

â“ éªŒè¯èº«ä»½è¯å·çš„æ–¹æ³•

## ä¼˜è§£ ğŸ”¥

åˆ†æï¼šèº«ä»½è¯å·ç çš„ç»„æˆï¼šåœ°å€ç 6ä½+å¹´ä»½ç 4ä½+æœˆä»½ç 2ä½+æ—¥æœŸç 2ä½+é¡ºåºç 3ä½+æ ¡éªŒç 1ä½

```js
function check(val){
  var reg=/^[1-9]\d{5}(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|(10|20|30|31))\d{3}[0-9Xx]$/;
  return reg.test(val);
}

// æ£€æµ‹çœä»½ç 
function checkProvice(val)
{
    var patten=/^[1-9][0-9]/;
    if(patten.test(val))
    {
        var prov={11:"åŒ—äº¬",12:"å¤©æ´¥",13:"æ²³åŒ—",14:"å±±è¥¿",15:"å†…è’™å¤",21:"è¾½å®",22:"å‰æ—",23:"é»‘é¾™æ±Ÿ",31:"ä¸Šæµ·",32:"æ±Ÿè‹",33:"æµ™æ±Ÿ",34:"å®‰å¾½",35:"ç¦å»º",36:"æ±Ÿè¥¿",37:"å±±ä¸œ",41:"æ²³å—",42:"æ¹–åŒ—",43:"æ¹–å—",44:"å¹¿ä¸œ",45:"å¹¿è¥¿",46:"æµ·å—",51:"å››å·",52:"è´µå·",53:"äº‘å—",54:"è¥¿è—",50:"é‡åº†",61:"é™•è¥¿",62:"ç”˜è‚ƒ",63:"é’æµ·",64:"å®å¤",65:"æ–°ç–†",81:"é¦™æ¸¯",82:"æ¾³é—¨",83:"å°æ¹¾"};
        if(prov[val])
        {
            return true;
        };
    }


   return false;
}


// æ£€æµ‹å‡ºç”Ÿæ—¥æœŸ
function checkBirthDay(val)
{
    var patten=/^(19|20)\d{2}((0[1-9])|1[0-2])(([0-2][1-9])|(10|20|30|31))/;
    if(patten.test(val))
    {
        var year=val.substring(0,4);
        var month=val.substring(4,6);
        var day=val.substring(6,8);

        var date=new Date(year+"-"+month+"-"+day);
        if(date&&date.getMonth()==(parseInt(month)-1))
        {
            return true;
        }

    }
    return false;
}

// æ£€æµ‹æ ¡éªŒç 
function checkVerifyCode(val)
{
    var patten=/^[1-9]\d{5}(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|(10|20|30|31))\d{3}[0-9X]$/;
    var ratio=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];
    var codeArr=[1,0,"X",9,8,7,6,5,4,3,2];
    var code=val.substring(17);
    if(patten.test(val))
    {
        var sum=0;
        for(var i=0;i<17;i++)
        {
            sum+=val[i]*ratio[i];
        }
        console.log(sum)
        var remainder=sum%11;
        if(codeArr[remainder]==code)
        {
            return true;
        }
    }
    return false;
}

function checkIndetityCardNo(val){
    var province=val.substring(0,2);
    if(checkProvice(province))
    {
        var date=val.substring(6,14);
        if(checkBirthDay(date))
        {
            return checkVerifyCode(val);
        }
    }
    return false;
}
```
