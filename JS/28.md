# P28

> é“¾å¼æ“ä½œ+ç»™Number/Objectå¯¹è±¡æ·»åŠ æ–¹æ³•

**âš¡é¢˜ç›®**:

â“ å®žçŽ°5.add(3).minus(2)

## ä¼˜è§£ ðŸ”¥

> æ‰©å±•æ”¯æŒæµ®ç‚¹æ•°;
ã€å¤§æ•°åŠ å‡ï¼šç›´æŽ¥é€šè¿‡ Number åŽŸç”Ÿçš„å®‰å…¨æžå€¼æ¥è¿›è¡Œåˆ¤æ–­ï¼Œè¶…å‡ºåˆ™ç›´æŽ¥å–å®‰å…¨æžå€¼ã€‘
ã€è¶…çº§å¤šä½æ•°çš„å°æ•°åŠ å‡ï¼šå–JSå®‰å…¨æžå€¼ä½æ•°-2ä½œä¸ºæœ€é«˜å…¼å®¹å°æ•°ä½æ•°

```js
Number.MAX_SAFE_DIGITS = Number.MAX_SAFE_INTEGER.toString().length-2
Number.prototype.digits = function(){
  let result = (this.valueOf().toString().split('.')[1] || '').length
  return result > Number.MAX_SAFE_DIGITS ? Number.MAX_SAFE_DIGITS : result
}
Number.prototype.add = function(i=0){
  if (typeof i !== 'number') {
          throw new Error('è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—');
      }
  const v = this.valueOf();
  const thisDigits = this.digits();
  const iDigits = i.digits();
  const baseNum = Math.pow(10, Math.max(thisDigits, iDigits));
  const result = (v * baseNum + i * baseNum) / baseNum;
  if(result>0){ return result > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : result }
  else{ return result < Number.MIN_SAFE_INTEGER ? Number.MIN_SAFE_INTEGER : result }
}
Number.prototype.minus = function(i=0){
  if (typeof i !== 'number') {
          throw new Error('è¯·è¾“å…¥æ­£ç¡®çš„æ•°å­—');
      }
  const v = this.valueOf();
  const thisDigits = this.digits();
  const iDigits = i.digits();
  const baseNum = Math.pow(10, Math.max(thisDigits, iDigits));
  const result = (v * baseNum - i * baseNum) / baseNum;
  if(result>0){ return result > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : result }
  else{ return result < Number.MIN_SAFE_INTEGER ? Number.MIN_SAFE_INTEGER : result }
}
```
