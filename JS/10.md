# ES5/ES6ç»§æ‰¿

**âš¡é¢˜ç›®**:

â“ ES5/ES6ç»§æ‰¿å·®å¼‚

## ä¼˜è§£ ğŸ”¥

ES6

```js
class Super {}
class Sub extends Super {}

const sub = new Sub();

Sub.__proto__ === Super;
```

babelè§£æ

```js
function Super(){}
let Sub = Object.create(Super)

Sub.__proto__ === Super; //true
```

å­ç±»å¯ä»¥ç›´æ¥é€šè¿‡ __proto__ å¯»å€åˆ°çˆ¶ç±»ã€‚

ES5

```js
function Super() {}
function Sub() {}

Sub.prototype = new Super();
Sub.prototype.constructor = Sub;

var sub = new Sub();

Sub.__proto__ === Function.prototype;

/*
 sub.__proto__ => Sub.prototype
 Sub.prototype.__proto__ => Super.prototype
 Super.prototype.constructor => Super
*/
```

è€Œé€šè¿‡ ES5 çš„æ–¹å¼ï¼ŒSub.__proto__ === Function.prototype

ES5 å’Œ ES6 å­ç±» this ç”Ÿæˆé¡ºåºä¸åŒã€‚ES5 çš„ç»§æ‰¿å…ˆç”Ÿæˆäº†å­ç±»å®ä¾‹ï¼Œå†è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¿®é¥°å­ç±»å®ä¾‹ï¼ŒES6 çš„ç»§æ‰¿å…ˆç”Ÿæˆçˆ¶ç±»å®ä¾‹ï¼Œå†è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®é¥°çˆ¶ç±»å®ä¾‹ã€‚è¿™ä¸ªå·®åˆ«ä½¿å¾— ES6 å¯ä»¥ç»§æ‰¿å†…ç½®å¯¹è±¡ã€‚

```js
function MyES5Array() {
  Array.call(this, arguments);
}

// it's useless
const arrayES5 = new MyES5Array(3); // arrayES5: MyES5Array {}

class MyES6Array extends Array {}

// it's ok
const arrayES6 = new MyES6Array(3); // arrayES6: MyES6Array(3) []
```

## æ€»ç»“

![ES6-CLASS](./imgs/ES6-class.png)

- ES5çš„ç»§æ‰¿ï¼ŒES6çš„ç»§æ‰¿å®ç°åœ¨äºä½¿ç”¨**superå…³é”®å­—**è°ƒç”¨çˆ¶ç±»ï¼Œåè§‚ES5æ˜¯é€šè¿‡**callæˆ–è€…applyå›è°ƒæ–¹æ³•æˆ–ä½¿ç”¨åŸå‹é“¾ç»§æ‰¿**è°ƒç”¨çˆ¶ç±»ã€‚

## ä»£ç é¢˜

```js
function Person (name, sex) {  
  this.name = name  
  this.sex = sex  
  var evil = 'æˆ‘å¾ˆé‚ªæ¶'  
  var pickNose = function () {   
    console.log('æˆ‘ä¼šæ‰£é¼»å­ä½†ä¸è®©ä½ çœ‹è§')  
  }
  this.drawing = function (type) {    
    console.log('æˆ‘è¦ç”»ä¸€å¹…' + type)  
  }
}
Person.fight = function () {  
  console.log('æ‰“æ¶')
}
Person.prototype.wc = function () {  
  console.log('æˆ‘æ˜¯ä¸ªäººæˆ‘ä¼šwc')
}
var p1 = new Person('lindaidai', 'boy')
console.log(p1.name) // lindaidai
console.log(p1.evil) // undefined
p1.drawing('å›½ç”»') // æˆ‘è¦ç”»ä¸€å¹…å›½ç”»
p1.pickNose() // Uncaught TypeError: p1.pickNose is not a function
p1.fight() // Uncaught TypeError: p1.fight is not a function
p1.wc() // æˆ‘æ˜¯ä¸ªäººæˆ‘ä¼šwc
Person.fight() // æ‰“æ¶
Person.wc() // Uncaught TypeError: Person.wc is not a function
console.log(Person.sex) // undefined, å…¬æœ‰(å®ä¾‹)å±æ€§ï¼Œå¹¶ä¸å­˜åœ¨äºæ„é€ å‡½æ•°ä¸Š
```

## ç»§æ‰¿æ¨¡å¼

> ä»¥ä¸‹éƒ½æ˜¯ä¼ªä»£ç æ¨¡å¼ï¼Œå¤§è‡´æè¿°ç»§æ‰¿åŸç†

- åŸå‹é“¾ç»§æ‰¿

```js
Child.prototype = new Parent()
```

- æ„é€ ç»§æ‰¿

```js
function Child () {
  Parent.call(this, ...arguments)
}
```

- ç»„åˆç»§æ‰¿

```js
// æ„é€ ç»§æ‰¿
function Child () {
  Parent.call(this, ...arguments)
}
// åŸå‹é“¾ç»§æ‰¿
Child.prototype = new Parent()
// ä¿®æ­£constructor
Child.prototype.constructor = Child
```

- å¯„ç”Ÿç»„åˆç»§æ‰¿

```js
// æ„é€ ç»§æ‰¿
function Child () {
  Parent.call(this, ...arguments)
}
// åŸå‹å¼ç»§æ‰¿
Child.prototype = Object.create(Parent.prototype)
// ä¿®æ­£constructor
Child.prototype.constructor = Child
```

- åŸå‹å¼ç»§æ‰¿

```js
var child = Object.create(parent)
```

- å¯„ç”Ÿå¼ç»§æ‰¿

```js
function createAnother (original) {
    var clone = Object.create(original);; // é€šè¿‡è°ƒç”¨ Object.create() å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
    clone.fn = function () {}; // ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡
    return clone; // è¿”å›è¿™ä¸ªå¯¹è±¡
}
```

- æ··å…¥æ–¹å¼ç»§æ‰¿

```js
function Child () {
    Parent.call(this)
    OtherParent.call(this)
}
Child.prototype = Object.create(Parent.prototype)
Object.assign(Child.prototype, OtherParent.prototype)
Child.prototype.constructor = Child
```

- class ç»§æ‰¿

```js
class Child extends Parent {
    constructor (...args) {
        super(...args)
    }
}
```
