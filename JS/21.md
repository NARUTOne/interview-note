# P21

> JS é¢è¯•

**âš¡é¢˜ç›®**:

â“ URL å‚æ•°è§£æä¸ºä¸€ä¸ªå¯¹è±¡

## ä¼˜è§£ ğŸ”¥

> å¸¸è§„è§£æ

```js
function parseQueryString (url) {
  const index = url.indexOf("?");
  if (!url || index < 0) return {};

  const paramStr = decodeURIComponent(url).slice(index + 1);
  const paramArr = paramStr.split("&");
  const params = paramArr.map(p => {
    const pa = p.split("=");
    return {
      [pa[0]]: [pa[1]]
    }
  })
  return params;
}
```

> æ­£åˆ™è§£æ

```js
function parseQueryString (url) {
  const index = url.indexOf("?");
  if (!url || index < 0) return {};

  return JSON.parse('{"' + decodeURIComponent(url).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}');
}
```

> åº”ç”¨

urlæœ‰ä¸‰ç§æƒ…å†µ

```js
https://www.xx.cn/api?keyword=&level1=&local_batch_id=&elective=&local_province_id=33
https://www.xx.cn/api?keyword=&level1=&local_batch_id=&elective=800&local_province_id=33
https://www.xx.cn/api?keyword=&level1=&local_batch_id=&elective=800,700&local_province_id=33
```

åŒ¹é…electiveåçš„æ•°å­—è¾“å‡ºï¼ˆå†™å‡ºä½ è®¤ä¸ºçš„æœ€ä¼˜è§£æ³•ï¼‰:

[] || ['800'] || ['800','700']

```js
function getUrlValue(url){
    if(!url) return;
    let res = url.match(/(?<=elective=)(\d+(,\d+)*)/);
    return res ?res[0].split(',') : [];
}
```
