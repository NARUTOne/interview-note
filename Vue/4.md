# P4

> Vue äº‹ä»¶ä»£ç†

**âš¡é¢˜ç›®**:

â“ vue åœ¨ v-for æ—¶ç»™æ¯é¡¹å…ƒç´ ç»‘å®šäº‹ä»¶éœ€è¦ç”¨äº‹ä»¶ä»£ç†å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

## ä¼˜è§£ ğŸ”¥

Vueä¸­é€šè¿‡v-onæˆ–å…¶è¯­æ³•ç³–@æŒ‡ä»¤æ¥ç»™å…ƒç´ ç»‘å®šäº‹ä»¶å¹¶ä¸”æä¾›äº†äº‹ä»¶ä¿®é¥°ç¬¦ï¼ŒåŸºæœ¬æµç¨‹æ˜¯è¿›è¡Œæ¨¡æ¿ç¼–è¯‘ç”ŸæˆASTï¼Œç”Ÿæˆrenderå‡½æ•°åå¹¶æ‰§è¡Œå¾—åˆ°VNodeï¼ŒVNodeç”ŸæˆçœŸå®DOMèŠ‚ç‚¹æˆ–è€…ç»„ä»¶æ—¶å€™ä½¿ç”¨addEventListeneræ–¹æ³•è¿›è¡Œäº‹ä»¶ç»‘å®šã€‚

äº‹ä»¶ä»£ç†ä½œç”¨ä¸»è¦æ˜¯ 2 ä¸ª

- å°†äº‹ä»¶å¤„ç†ç¨‹åºä»£ç†åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå‡å°‘å†…å­˜å ç”¨ç‡
- åŠ¨æ€ç”Ÿæˆå­èŠ‚ç‚¹æ—¶èƒ½è‡ªåŠ¨ç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºåˆ°çˆ¶èŠ‚ç‚¹

**React** ä¸­çš„äº‹ä»¶æ˜¯åˆæˆäº‹ä»¶ï¼Œæ‰€æœ‰äº‹ä»¶éƒ½å§”æ‰˜åˆ° document äº†ï¼Œæœ€åé€šè¿‡addEventListeneræ¥ç›‘å¬äº‹ä»¶ï¼Œreact-dom ä¸­ åˆæˆäº‹ä»¶çš„å¤„ç†æºç ï¼š

```js
// react-dom/src/events/EventListener.js
export function addEventBubbleListener(
  element: Document | Element,
  eventType: string,
  listener: Function,
): void {
  element.addEventListener(eventType, listener, false);
}

// è°ƒç”¨å¤„
addEventBubbleListener(element, getRawEventName(topLevelType)
```

**Vue**æœ¬èº«ä¸åšäº‹ä»¶ä»£ç†

ä¸€èˆ¬ç»™ v-for ç»‘å®šäº‹ä»¶æ—¶ï¼Œéƒ½ä¼šè®©èŠ‚ç‚¹æŒ‡å‘åŒä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åº

- æ™®é€šhtmlå…ƒç´ å’Œåœ¨ç»„ä»¶ä¸ŠæŒ‚äº†.nativeä¿®é¥°ç¬¦çš„äº‹ä»¶ã€‚æœ€ç»ˆEventTarget.addEventListener()æŒ‚è½½äº‹ä»¶
- ç»„ä»¶ä¸Šçš„ï¼Œvueç»„ä»¶å®ä¾‹ä¸Šçš„è‡ªå®šä¹‰äº‹ä»¶ï¼ˆä¸åŒ…æ‹¬.nativeï¼‰ä¼šè°ƒç”¨åŸå‹ä¸Šçš„$on,$emitï¼ˆåŒ…æ‹¬ä¸€äº›å…¶ä»–api $off,$onceç­‰ç­‰ï¼‰
