# P9

> æ–‡æœ¬æº¢å‡ºæˆªæ–­çœç•¥æ˜¯å¾ˆå¸¸è§çš„ä¸€ç§éœ€è€ƒè™‘çš„ä¸šåŠ¡åœºæ™¯ç»†èŠ‚ï¼Œå•è¡Œã€å¤šè¡Œã€‚

â“ æ–‡æœ¬æº¢å‡ºçœç•¥æ–¹æ¡ˆ

## ä¼˜è§£ ğŸš€

### å•è¡Œæ–‡æœ¬

> éœ€è¦å®šä¹‰å®½åº¦ï¼Œæˆ–å®½åº¦æ»¡è¡Œ

```html
<style>
    .demo {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>
<body>
  <div class="demo">è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬</div>
</body>
```

- overflow: hiddenï¼›ï¼ˆæ–‡å­—é•¿åº¦è¶…å‡ºé™å®šå®½åº¦ï¼Œåˆ™éšè—è¶…å‡ºçš„å†…å®¹ï¼‰
- white-space: nowrapï¼›ï¼ˆè®¾ç½®æ–‡å­—åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œä¸èƒ½æ¢è¡Œï¼‰
- text-overflow: ellipsisï¼›ï¼ˆè§„å®šå½“æ–‡æœ¬æº¢å‡ºæ—¶ï¼Œæ˜¾ç¤ºçœç•¥ç¬¦å·æ¥ä»£è¡¨è¢«ä¿®å‰ªçš„æ–‡æœ¬ï¼‰

### å¤šè¡Œæ–‡æœ¬ (æŒ‰è¡Œæ•°)

#### CSSæ–¹æ¡ˆ

> å…¼å®¹æ€§ä¸€èˆ¬ï¼š -webkit-line-clamp å±æ€§åªæœ‰ WebKit å†…æ ¸çš„æµè§ˆå™¨æ‰æ”¯æŒ; å¤šé€‚ç”¨äºç§»åŠ¨ç«¯é¡µé¢ï¼Œå› ä¸ºç§»åŠ¨è®¾å¤‡æµè§ˆå™¨æ›´å¤šæ˜¯åŸºäº WebKit å†…æ ¸

- -webkit-line-clamp: 2ï¼›ï¼ˆç”¨æ¥é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°, 2 è¡¨ç¤ºæœ€å¤šæ˜¾ç¤º 2 è¡Œã€‚ ä¸ºäº†å®ç°è¯¥æ•ˆæœï¼Œå®ƒéœ€è¦ç»„åˆå…¶ä»–çš„WebKitå±æ€§ï¼‰
- display: -webkit-boxï¼›ï¼ˆå’Œ 1 ç»“åˆä½¿ç”¨ï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º ï¼‰
- -webkit-box-orient: verticalï¼›ï¼ˆå’Œ 1 ç»“åˆä½¿ç”¨ ï¼Œè®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ ï¼‰
- overflow: hiddenï¼›ï¼ˆæ–‡æœ¬æº¢å‡ºé™å®šçš„å®½åº¦å°±éšè—å†…å®¹ï¼‰
- text-overflow: ellipsisï¼›ï¼ˆå¤šè¡Œæ–‡æœ¬çš„æƒ…å†µä¸‹ï¼Œç”¨çœç•¥å·â€œâ€¦â€éšè—æº¢å‡ºèŒƒå›´çš„æ–‡æœ¬)

```html
<style>
  .demo {
      display: -webkit-box;
      overflow: hidden;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
  }
</style>

<body>
  <div class='demo'>è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬</div>
</body>
```

#### JSæ–¹æ¡ˆ

> é€‚ç”¨äºå“åº”å¼æˆªæ–­ï¼Œå¤šè¡Œæ–‡æœ¬æº¢å‡ºçœç•¥çš„æƒ…å†µ

```html
<!-- å½“å‰ä»…é€‚ç”¨äºæ–‡æœ¬ä¸ºä¸­æ–‡ï¼Œè‹¥æ–‡æœ¬ä¸­æœ‰è‹±æ–‡ï¼Œå¯è‡ªè¡Œä¿®æ”¹ -->
<script type="text/javascript">
    const text = 'è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬';
    const totalTextLen = text.length;
    const formatStr = () => {
        const ele = document.getElementsByClassName('demo')[0];
        const lineNum = 2;
        const baseWidth = window.getComputedStyle(ele).width;
        const baseFontSize = window.getComputedStyle(ele).fontSize;
        const lineWidth = +baseWidth.slice(0, -2);

        // æ‰€è®¡ç®—çš„strNumä¸ºå…ƒç´ å†…éƒ¨ä¸€è¡Œå¯å®¹çº³çš„å­—æ•°(ä¸åŒºåˆ†ä¸­è‹±æ–‡)
        const strNum = Math.floor(lineWidth / +baseFontSize.slice(0, -2));

        let content = '';

        // å¤šè¡Œå¯å®¹çº³æ€»å­—æ•°
        const totalStrNum = Math.floor(strNum * lineNum);

        const lastIndex = totalStrNum - totalTextLen;

        if (totalTextLen > totalStrNum) {
            content = text.slice(0, lastIndex - 3).concat('...');
        } else {
            content = text;
        }
        ele.innerHTML = content;
    }

    formatStr();

    window.onresize = () => {
        formatStr();
    };
</script>

<body>
  <div class='demo'></div>
</body>
```

### å¤šè¡Œæ–‡æœ¬ ï¼ˆæŒ‰é«˜åº¦ï¼‰

1)æ–‡æœ¬æº¢å‡ºï¼Œä¸æ˜¾ç¤ºçœç•¥å·

> é€‚ç”¨äºæ–‡æœ¬æº¢å‡ºä¸éœ€è¦æ˜¾ç¤ºçœç•¥å·çš„æƒ…å†µ

```html
<style>
  .demo {
    overflow: hidden;
    max-height: 40px;
    line-height: 20px;
  }
</style>

<body>
  <div class='demo'>è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬</div>
</body>
```

2)ä¼ªå…ƒç´  + å®šä½å®ç°å¤šè¡Œçœç•¥

> é€‚ç”¨äºå¯¹çœç•¥æ•ˆæœè¦æ±‚è¾ƒä½ï¼Œæ–‡æœ¬ä¸€å®šä¼šæº¢å‡ºå…ƒç´ çš„æƒ…å†µ; æ— æ³•è¯†åˆ«æ–‡å­—çš„é•¿çŸ­ï¼Œæ— è®ºæ–‡æœ¬æ˜¯å¦æº¢å‡ºèŒƒå›´, ä¸€ç›´æ˜¾ç¤ºçœç•¥å·ï¼› çœç•¥å·æ˜¾ç¤ºå¯èƒ½ä¸ä¼šåˆšåˆšå¥½ï¼Œæœ‰æ—¶ä¼šé®ä½ä¸€åŠæ–‡å­—

- position: relative; ï¼ˆä¸ºä¼ªå…ƒç´ ç»å¯¹å®šä½ï¼‰
- overflow: hidden; ï¼ˆæ–‡æœ¬æº¢å‡ºé™å®šçš„å®½åº¦å°±éšè—å†…å®¹ï¼‰
- position: absolute;ï¼ˆç»™çœç•¥å·ç»å¯¹å®šä½ï¼‰
- line-height: 20px; ï¼ˆç»“åˆå…ƒç´ é«˜åº¦,é«˜åº¦å›ºå®šçš„æƒ…å†µä¸‹,è®¾å®šè¡Œé«˜, æ§åˆ¶æ˜¾ç¤ºè¡Œæ•°ï¼‰
- height: 40px; ï¼ˆè®¾å®šå½“å‰å…ƒç´ é«˜åº¦ï¼‰
- ::after {}  ï¼ˆè®¾ç½®çœç•¥å·æ ·å¼ï¼‰

```html
<style>
    .demo {
        position: relative;
        line-height: 20px;
        height: 40px;
        overflow: hidden;
    }
    .demo::after {
        content: "...";
        position: absolute;
        bottom: 0;
        right: 0;
        padding: 0 20px 0 10px;
    }
</style>

<body>
  <div class='demo'>è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬</div>
</body>
```

3)Float ç‰¹æ€§ï¼Œçº¯ CSS å®ç°å¤šè¡Œçœç•¥

> çœç•¥å·æ˜¾ç¤ºå¯èƒ½ä¸ä¼šåˆšåˆšå¥½ï¼Œæœ‰æ—¶ä¼šé®ä½ä¸€åŠæ–‡å­—; æµ®åŠ¨çœç•¥å·æœ‰æ—¶ç”±äºhiddenè€Œéšè—äº†

```html
<style>
    .demo {
        background: #099;
        max-height: 40px;
        line-height: 20px;
        overflow: hidden;
    }
    .demo::before{
        float: left;
        content:'';
        width: 20px;
        height: 40px;
    }

    .demo .text {
        float: right;
        width: 100%;
        margin-left: -20px;
        word-break: break-all;
    }
    .demo::after{
        float:right;
        content:'...';
        width: 20px;
        height: 20px;
        position: relative;
        left:100%;
        transform: translate(-100%,-100%);
    }
</style>

<body>
  <div class='demo'>è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬</div>
</body>
```
